"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[447],{68447:function(e,n,t){t.r(n),t.d(n,{default:function(){return X}});var r=t(47313),a=t(65964),i=t(80941),o=t(82937),s=t(76025),l=t(1333),c=t(4277),u=t(24969),d=t(87130),h=t(80133),m=t(1413),g=t(74165),v=t(15861),x=t(29439),p=t(92484),f=t(62463),j=t(16157),Z=t(34207),b=t(77914),y=t(42669),_=t(73477),S=t(61911),C=t(69973),k=t(75627),w=t(62563),P=t(95544),I=t(63129),E=t(2464),A=t(46417),K=C.object().shape({categories:C.mixed().required("At least one skill is required")});function W(){var e=(0,h.nt)().translate,n=(0,l.v9)((function(e){return e.categories})),t=n.categories,a=n.isLoading,i=n.refresh,o=(0,r.useState)([]),s=(0,x.Z)(o,2),u=s[0],d=s[1],C=(0,r.useState)([{}]),W=(0,x.Z)(C,2),M=W[0],N=W[1],T=(0,k.cI)({reValidateMode:"onChange",resolver:(0,w.X)(K),defaultValues:{categories:null}}),R=T.setValue,q=T.trigger,z=T.handleSubmit,L=T.formState.errors,G=function(){var e=(0,v.Z)((0,g.Z)().mark((function e(n){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,l.WI)((0,c.aS)(M)),(0,l.WI)((0,c.G3)());case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){null!==t&&void 0!==t&&t.length&&d(null===t||void 0===t?void 0:t.filter((function(e){var n=null===e||void 0===e?void 0:e.advantages;return!(null!==n&&void 0!==n&&n.every((function(e){return e.type===I.KN.restaurant||e.type===I.KN.gift})))})))}),[t]),(0,r.useEffect)((function(){(0,l.WI)((0,E.kw)({}))}),[i]),(0,A.jsx)(p.Z,{sx:{p:3,mb:3},children:(0,A.jsx)(f.Z,{flexGrow:1,spacing:1,children:a?(0,A.jsx)(j.Z,{sx:{display:"flex",flex:1,alignItems:"center",justifyContent:"center",height:300,width:"100%"},children:(0,A.jsx)(Z.Z,{size:40,color:"primary"})}):(0,A.jsxs)(S.Z,{methods:T,onSubmit:z(G),children:[(0,A.jsx)(P.Z,{fullWidth:!0,name:"categories",onChange:function(e,n){R("categories",n),q(),N(n)},options:u,disableCloseOnSelect:!0,noOptionsText:e("empty_table.no_catgeory_for_reload_engouragment"),getOptionLabel:function(e){return e.name},renderInput:function(n){return(0,A.jsx)(b.Z,(0,m.Z)((0,m.Z)({helperText:L.categories&&e("rechargementPage.at_least_one_category"),error:!!L.categories},n),{},{label:e("Categories")}))},renderOption:function(e,n){return(0,r.createElement)("li",(0,m.Z)((0,m.Z)({},e),{},{key:null===n||void 0===n?void 0:n.id}),(0,A.jsx)(f.Z,{spacing:1,children:(0,A.jsx)(y.Z,{variant:"subtitle1",children:null===n||void 0===n?void 0:n.name})}))}}),(0,A.jsx)(f.Z,{spacing:3,children:(0,A.jsx)(j.Z,{sx:{textAlign:"right"},children:(0,A.jsx)(_.Z,{sx:{mt:3},type:"submit",variant:"contained",children:e("next")})})})]})})})}var M=t(34940),N=t(59017),T=t(32703),R=t(58908),q=t(10978),z=t(11154);function L(){var e,n,t=(0,h.nt)().translate,a=(0,l.I0)(),i=(0,R.Ds)().enqueueSnackbar,o=(0,l.v9)((function(e){return e.rechargement.rechargementEncouragement})).cagnottes,s=(0,l.v9)((function(e){return e.rechargement})).isLoadingReloadEncouragement,u=(0,r.useMemo)((function(){var e;return{advantages:null===o||void 0===o||null===(e=o.advantages)||void 0===e?void 0:e.filter((function(e){return(null===e||void 0===e?void 0:e.type)!==I.KN.restaurant&&(null===e||void 0===e?void 0:e.type)!==I.KN.gift})).map((function(e){return{id:null===o||void 0===o?void 0:o.id,forAdvantageType:null===e||void 0===e?void 0:e.type,amountPerEmployee:null}}))}}),[o]),d=C.object().shape({advantages:C.array().of(C.object().shape({amountPerEmployee:C.number().typeError(t("invalid_value")).transform((function(e,n){return""===(null===n||void 0===n?void 0:n.trim())?null:e})).nullable().moreThan(0,t("cagnotte.Must_be_more_than")).max(1e4,t("cagnotte.Must_be_less_than"))}))}),m=(0,k.cI)({mode:"all",resolver:(0,w.X)(d),defaultValues:u}),x=m.handleSubmit,p=(0,m.watch)(),Z=function(){a((0,c.G3)())},b=function(){var e=(0,v.Z)((0,g.Z)().mark((function e(n){var r,s,l;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],s=0;s<p.advantages.length;s++)null!==n.advantages[s].amountPerEmployee&&""!==n.advantages[s].amountPerEmployee&&(l={forCategoryId:null===o||void 0===o?void 0:o.id,forAdvantageType:n.advantages[s].forAdvantageType,amountPerEmployee:parseInt(n.advantages[s].amountPerEmployee)},r.push(l));0!==r.length?a((0,c.yE)({data:r,onNextStep:Z})):i(t("rechargementPage.fields.advantage_required_event"),{variant:"error"});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,A.jsxs)(j.Z,{children:[(0,A.jsx)(y.Z,{variant:"h6",sx:{color:"text.disabled",mb:3},children:t("Advantages")}),(0,A.jsxs)(z.ZP,{methods:m,onSubmit:x(b),children:[(0,A.jsx)(f.Z,{divider:(0,A.jsx)(M.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:3,children:0===(null===o||void 0===o||null===(e=o.advantages)||void 0===e?void 0:e.filter((function(e){return(null===e||void 0===e?void 0:e.type)!==I.KN.restaurant&&(null===e||void 0===e?void 0:e.type)!==I.KN.gift})).length)?(0,A.jsx)(y.Z,{variant:"h5",alignSelf:"center",children:t("cagnotte.no_benefits")}):(0,A.jsx)(A.Fragment,{children:null===o||void 0===o||null===(n=o.advantages)||void 0===n?void 0:n.filter((function(e){return(null===e||void 0===e?void 0:e.type)!==I.KN.restaurant&&(null===e||void 0===e?void 0:e.type)!==I.KN.gift})).map((function(e,n){return(0,A.jsx)(f.Z,{children:(0,A.jsxs)(f.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:1},children:[(0,A.jsx)(z.au,{size:"small",name:"advantages[".concat(n,"].forAdvantageType"),disabled:!0}),(0,A.jsx)(z.au,{size:"small",label:t("cagnotte.amount"),name:"advantages[".concat(n,"].amountPerEmployee"),InputProps:{startAdornment:(0,A.jsx)(N.Z,{position:"start",children:"$"})}})]})},e.id)}))})}),(0,A.jsxs)(f.Z,{direction:"row",alignItems:"center",spacing:3,justifyContent:"space-between",sx:{mt:3},children:[(0,A.jsx)(_.Z,{size:"small",color:"inherit",startIcon:(0,A.jsx)(q.Z,{icon:"eva:arrow-ios-back-fill"}),onClick:function(){a((0,c.QZ)())},children:t("back")}),(0,A.jsx)(j.Z,{sx:{textAlign:"right"},children:(0,A.jsx)(T.Z,{loading:s,type:"submit",variant:"contained",disabled:0===(null===o||void 0===o?void 0:o.advantages.length),children:t("next")})})]})]})]})}function G(){return(0,A.jsx)(p.Z,{sx:{p:3,mb:3},children:(0,A.jsx)(L,{})})}var O=t(58467),V=t(70224),B=t(89886);function F(e){var n=e.open,t=(0,h.nt)().translate,r=(0,l.I0)(),a=(0,O.s0)();return(0,A.jsx)(B.Kl,{fullScreen:!0,open:n,PaperProps:{sx:{maxWidth:{md:"calc(100% - 48px)"},maxHeight:{md:"calc(100% - 48px)"}}},children:(0,A.jsxs)(f.Z,{spacing:5,sx:{m:"auto",maxWidth:480,textAlign:"center",px:{xs:2,sm:0}},children:[(0,A.jsx)(y.Z,{variant:"h4",children:t("rechargementPage.encouragement.completed")}),(0,A.jsx)(V.Jt,{sx:{height:260}}),(0,A.jsxs)(y.Z,{children:[(0,A.jsx)("br",{})," ",t("rechargementPage.encouragement.continue")]}),(0,A.jsx)(M.Z,{sx:{borderStyle:"dashed"}}),(0,A.jsx)(f.Z,{spacing:2,justifyContent:"space-between",direction:{xs:"column-reverse",sm:"row"},children:(0,A.jsx)(_.Z,{fullWidth:!0,size:"large",color:"inherit",variant:"outlined",onClick:function(){a(s.vB.rechargement.root),r((0,c.se)())},startIcon:(0,A.jsx)(q.Z,{icon:"eva:arrow-ios-back-fill"}),children:t("rechargementPage.encouragement.buttonContinue")})})]})})}var D=t(79624);function X(){var e=(0,d.K$)().themeStretch,n=(0,l.I0)(),t=(0,h.nt)().translate,m=[t("Categories"),t("Advantages")],g=(0,l.v9)((function(e){return null===e||void 0===e?void 0:e.rechargement})).rechargementEncouragement.activeStep,v=g===m.length;return(0,r.useEffect)((function(){n((0,c.p9)()),0===g&&n((0,c.WG)(null))}),[n,g]),(0,r.useEffect)((function(){n((0,c.se)())}),[n]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(a.ql,{children:(0,A.jsxs)("title",{children:[" ",t("Rechargment")]})}),(0,A.jsxs)(i.Z,{maxWidth:!e&&"lg",children:[(0,A.jsx)(u.Z,{heading:t("Rechargment"),links:[{name:t("Dashboard"),href:s.vB.general.homeComany},{name:t("Rechargment"),href:s.vB.rechargement.root},{name:t("rechargementPage.Recharge_Encouragement")}]}),(0,A.jsx)(o.ZP,{container:!0,justifyContent:v?"center":"flex-start",children:(0,A.jsx)(o.ZP,{item:!0,xs:12,md:12,children:(0,A.jsx)(D.Z,{activeStep:g,steps:m})})}),v?(0,A.jsx)(F,{open:v}):(0,A.jsxs)(A.Fragment,{children:[0===g&&(0,A.jsx)(W,{}),1===g&&(0,A.jsx)(G,{})]})]})]})}},79624:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(1413),a=t(45987),i=t(64164),o=t(35711),s=t(2074),l=t(95895),c=t(98368),u=t(62463),d=t(16157),h=t(10978),m=t(46417),g=["steps","activeStep","sx"],v=(0,i.ZP)(o.Z)((function(e){var n=e.theme;return{top:10,left:"calc(-50% + 20px)",right:"calc(50% + 20px)","& .MuiStepConnector-line":{borderTopWidth:2,borderColor:n.palette.divider},"&.Mui-active, &.Mui-completed":{"& .MuiStepConnector-line":{borderColor:n.palette.primary.main}}}}));function x(e){var n=e.steps,t=e.activeStep,i=e.sx,o=(0,a.Z)(e,g);return(0,m.jsx)(s.Z,(0,r.Z)((0,r.Z)({alternativeLabel:!0,activeStep:t,connector:(0,m.jsx)(v,{}),sx:(0,r.Z)({mb:5},i)},o),{},{children:n.map((function(e){return(0,m.jsx)(l.Z,{children:(0,m.jsx)(c.Z,{StepIconComponent:p,sx:{"& .MuiStepLabel-label":{typography:"subtitle2"}},children:e})},e)}))}))}function p(e){var n=e.active,t=e.completed;return(0,m.jsx)(u.Z,{alignItems:"center",justifyContent:"center",sx:(0,r.Z)({width:24,height:24,color:"text.disabled"},n&&{color:"primary.main"}),children:t?(0,m.jsx)(h.Z,{icon:"eva:checkmark-fill",sx:{color:"primary.main"}}):(0,m.jsx)(d.Z,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:"currentColor"}})})}}}]);