"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[233],{60167:function(e,n,i){i.d(n,{Z:function(){return j}});var o=i(1413),a=i(29439),s=i(45987),t=i(47313),r=i(75627),l=i(77914),d=i(59017),c=i(18104),u=i(6621),m=i(80133),p=i(18588),h=i(10978),v=i(94085),x=i(69862),f=i(46417),g=["itemName","name","helperText","type","endAdornment"];function j(e){var n=e.itemName,i=e.name,j=e.helperText,Z=e.type,b=e.endAdornment,y=(0,s.Z)(e,g),_=(0,r.Gc)().control,C=(0,m.nt)().currentLang,w=(0,x.S)(),k=(0,t.useState)(""),S=(0,a.Z)(k,2),P=S[0],I=S[1],q=(0,t.useState)(""),A=(0,a.Z)(q,2),E=A[0],T=A[1],G=(0,t.useCallback)((function(e){I(e.target.value)}),[]),L=""!==P?p.h.filter((function(e){return-1!==e.labelFr.toLowerCase().indexOf(P.toLowerCase())||-1!==e.labelEn.toLowerCase().indexOf(P.toLowerCase())})):p.h;return"phone"===Z?(0,f.jsx)(r.Qr,{name:i,control:_,render:function(e){var i=e.field,a=e.fieldState.error;return(0,f.jsx)(l.Z,(0,o.Z)((0,o.Z)({},i),{},{fullWidth:!0,type:Z,value:"number"===Z&&0===i.value?"":i.value,onChange:function(e){"number"===Z?i.onChange(Number(e.target.value)):i.onChange(e.target.value)},error:!!a,helperText:a?null===a||void 0===a?void 0:a.message:j,InputProps:{startAdornment:(0,f.jsx)(r.Qr,{name:n,control:_,render:function(e){var n,i;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(d.Z,{position:"start",children:[(0,f.jsx)(c.Z,{onClick:w.onOpen,children:(0,f.jsx)(h.Z,{icon:"circle-flags:".concat(1===p.h.filter((function(n){return n.phone===e.field.value})).length||""===E?null===(n=p.h.filter((function(n){return n.phone===e.field.value}))[0])||void 0===n?void 0:n.code.toLowerCase():null===(i=p.h.filter((function(n){return n.phone===e.field.value&&E===n.id}))[0])||void 0===i?void 0:i.code.toLowerCase()),width:28})}),(0,f.jsxs)(x.Z,{open:w.open,onClose:w.onClose,children:[(0,f.jsx)(l.Z,{value:P,onChange:G,placeholder:"",fullWidth:!0,sx:{p:1}}),(0,f.jsx)(v.Z,{sx:{maxHeight:250,width:300},children:L.map((function(n){return(0,f.jsxs)(u.Z,{sx:{width:300},onClick:function(){e.field.onChange(n.phone),w.onClose(),T(n.id)},children:[(0,f.jsx)(h.Z,{icon:"circle-flags:".concat(null===n||void 0===n?void 0:n.code.toLowerCase()),width:28,sx:{mr:1}}),"fr"===C.value?null===n||void 0===n?void 0:n.labelFr:n.labelEn,"\xa0",null===n||void 0===n?void 0:n.phone]},n.id)}))})]})]}),(0,f.jsx)(d.Z,{position:"end",sx:{mr:1},children:e.field.value})]})}}),endAdornment:b}},y))}}):(0,f.jsx)(r.Qr,{name:i,control:_,render:function(e){var n=e.field,i=e.fieldState.error;return(0,f.jsx)(l.Z,(0,o.Z)((0,o.Z)({},n),{},{fullWidth:!0,type:Z,value:"number"===Z&&0===n.value?"":n.value,onChange:function(e){"number"===Z?n.onChange(Number(e.target.value)):n.onChange(e.target.value)},error:!!i,helperText:i?null===i||void 0===i?void 0:i.message:j},y))}})}},52233:function(e,n,i){i.r(n),i.d(n,{default:function(){return ie}});var o=i(29439),a=i(65964),s=i(47313),t=i(62463),r=i(80941),l=i(51930),d=i(51987),c=i(16157),u=i(76025),m=i(10978),p=i(24969),h=i(87130),v=i(80133),x=i(1333),f=i(74165),g=i(15861),j=i(69973),Z=i(58467),b=i(75627),y=i(62563),_=(i(87131),i(32703)),C=i(82937),w=i(92484),k=i(42669),S=i(68986),P=i(11154),I=i(60167),q=i(63129),A=i(8337),E=i(46417);function T(e){var n=e.isEdit,i=void 0!==n&&n,o=e.currentCompany,a=(0,Z.s0)(),r=(0,Z.UO)().id,l=(0,v.nt)().translate,d=(0,x.I0)(),u=(0,S.Ds)().enqueueSnackbar,m=(0,x.v9)((function(e){return e.auth})),p=m.user,h=m.isLoadingUpdate,T=j.object().shape({name:j.string().required(l("companies.name_is_required")).max(64,l("companies.company_name_max")).matches(/^[a-zA-Z\xc0-\xff\s]+$/,l("companies.name_alpha")),address:j.string().required(l("companies.address_is_required")).max(100,l("companies.address_length")),siret:j.string().required(l("companies.SIRET_is_required")).min(14,l("settings.siret_long")).max(14,l("settings.siret_long")),tax:j.number().required(l("companies.tax_is_required")).typeError(l("invalid_value")).transform((function(e,n){return""===("string"===typeof n?n.trim():n)?null:e})).nullable().moreThan(0,l("companies.tax_must_be_more_than")).max(99,l("companies.tax_must_be_less_than")),website:j.string().required(l("companies.website_is_required")).max(120,l("companies.website_length")),invoiceEmail:j.string().required(l("companies.email_is_required")).email(l("companies.invoice_mail_invalid")).max(100,l("companies.invoice_mail_invalid")),invoiceAddress:j.string().required(l("companies.address_is_required")).max(100,l("companies.address_length")),phone:j.string().required(l("companies.phone_is_required")).matches(/^((\d{9}))$/,l("employee.phone_invalid")),phoneCode:j.string().default(q.Gp)}),G=(0,s.useMemo)((function(){var e,n,i,o,a;return{name:(null===p||void 0===p?void 0:p.company.name)||"",website:(null===p||void 0===p?void 0:p.company.website)||"",address:(null===p||void 0===p?void 0:p.company.address)||"",siret:(null===p||void 0===p?void 0:p.company.siret)||"",tax:(null===p||void 0===p?void 0:p.company.tax)||0,invoiceAddress:(null===p||void 0===p?void 0:p.company.invoiceAddress)||"",invoiceEmail:(null===p||void 0===p?void 0:p.company.invoiceEmail)||"",phone:null!==p&&void 0!==p&&null!==(e=p.company)&&void 0!==e&&e.phone&&null!==(null===p||void 0===p||null===(n=p.company)||void 0===n?void 0:n.phone)?null===p||void 0===p||null===(i=p.company)||void 0===i?void 0:i.phone.replace(q.Sm,""):"",phoneCode:null!==p&&void 0!==p&&null!==(o=p.company)&&void 0!==o&&o.phone&&null!==(null===p||void 0===p||null===(a=p.company)||void 0===a?void 0:a.phone)?null===p||void 0===p?void 0:p.company.phone.slice(0,(null===p||void 0===p?void 0:p.company.phone.length)-(null===p||void 0===p?void 0:p.company.phone.replace(q.Sm,"").length)):q.Gp}}),[o]),L=(0,b.cI)({mode:"all",reValidateMode:"onChange",resolver:(0,y.X)(T),defaultValues:G}),D=L.reset,M=L.handleSubmit,N=L.formState.isDirty;(0,s.useEffect)((function(){i&&o&&D(G),i||D(G)}),[i,o]);var V=function(){var e=(0,g.Z)((0,f.Z)().mark((function e(n){var i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={name:n.name,website:n.website,address:n.address,siret:n.siret,tax:n.tax,invoiceAddress:n.invoiceAddress,invoiceEmail:n.invoiceEmail,phone:"".concat(n.phoneCode).concat(n.phone)},d((0,A.Fe)({isLoading:!1,data:i,user:p,id:r,toast:u,navigate:a,translate:l}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,E.jsx)(P.ZP,{methods:L,onSubmit:M(V),children:(0,E.jsx)(C.ZP,{container:!0,spacing:3,children:(0,E.jsx)(C.ZP,{item:!0,xs:12,md:12,children:(0,E.jsxs)(w.Z,{sx:{p:3},children:[(0,E.jsx)(k.Z,{variant:"subtitle2",sx:{color:"text.secondary",mt:3,mb:3},children:l("companies.informationscompany")}),(0,E.jsxs)(c.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,E.jsx)(P.au,{name:"name",placeholder:"Spinka",label:l("companies.name")}),(0,E.jsx)(P.au,{name:"address",placeholder:"France",label:l("companies.address")}),(0,E.jsx)(P.au,{name:"siret",placeholder:"23252187900034",type:"number",label:l("companies.SIRET")}),(0,E.jsx)(P.au,{name:"tax",placeholder:"20",label:l("companies.tax")}),(0,E.jsx)(P.au,{name:"website",placeholder:"https://exemple.com",label:l("companies.website")}),(0,E.jsx)(P.au,{name:"invoiceAddress",placeholder:"23 rue du Paradis, 75004 Paris",label:l("companies.invoiceAddress")}),(0,E.jsx)(P.au,{name:"invoiceEmail",placeholder:"john@exemple.com",label:l("companies.invoiceEmail")}),(0,E.jsx)(I.Z,{name:"phone",label:l("companies.phone"),itemName:"phoneCode",type:"phone",placeholder:"234567890"})]}),(0,E.jsx)(t.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,E.jsx)(_.Z,{type:"submit",variant:"contained",loading:h,disabled:!N,children:l("save")})})]})})})})}var G=i(1413),L=i(77914),D=i(32091);function M(){var e=(0,v.nt)().translate,n=(0,x.v9)((function(e){return e.auth})).company,i=(0,s.useMemo)((function(){var e,i,o,a,s,t,r,l,d,c,u,m,p,h;return{iban:(null===n||void 0===n||null===(e=n.paymentInformations)||void 0===e||null===(i=e[0])||void 0===i?void 0:i.iban)||"",bic:(null===n||void 0===n||null===(o=n.paymentInformations)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.bic)||"",signatory:(null===n||void 0===n||null===(s=n.paymentInformations)||void 0===s||null===(t=s[0])||void 0===t?void 0:t.signatory)||"",mandateDate:(null===n||void 0===n||null===(r=n.paymentInformations)||void 0===r||null===(l=r[0])||void 0===l?void 0:l.mandateDate)||null,mandateIdentifier:(null===n||void 0===n||null===(d=n.paymentInformations)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.mandateIdentifier)||"",bankAddress:(null===n||void 0===n||null===(u=n.paymentInformations)||void 0===u||null===(m=u[0])||void 0===m?void 0:m.bankAddress)||"",bankName:(null===n||void 0===n||null===(p=n.paymentInformations)||void 0===p||null===(h=p[0])||void 0===h?void 0:h.bankName)||""}}),[n]),o=(0,b.cI)({defaultValues:i}),a=o.handleSubmit,t=o.control,r=o.reset,l=function(){var e=(0,g.Z)((0,f.Z)().mark((function e(n){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){(0,x.WI)((0,A.Hi)())}),[]),(0,s.useEffect)((function(){null!==n&&void 0!==n&&n.paymentInformations&&r(i)}),[n,i,r]),(0,E.jsx)(P.ZP,{methods:o,onSubmit:a(l),children:(0,E.jsx)(C.ZP,{container:!0,spacing:3,children:(0,E.jsx)(C.ZP,{item:!0,xs:12,md:12,children:(0,E.jsx)(w.Z,{sx:{p:3},children:(0,E.jsxs)(c.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,E.jsx)(P.au,{name:"iban",disabled:!0,label:"IBAN"}),(0,E.jsx)(P.au,{name:"bic",disabled:!0,label:"BIC"}),(0,E.jsx)(P.au,{name:"bankName",disabled:!0,label:e("companies.bankName")}),(0,E.jsx)(P.au,{name:"bankAddress",disabled:!0,label:e("companies.bankAddress")}),(0,E.jsx)(b.Qr,{name:"mandateDate",control:t,render:function(n){var i=n.field,o=n.fieldState.error;return(0,E.jsx)(D.M,(0,G.Z)((0,G.Z)({disabled:!0},i),{},{label:e("companies.mandateDate"),inputFormat:"dd/MM/yyyy",renderInput:function(e){return(0,E.jsx)(L.Z,(0,G.Z)((0,G.Z)({fullWidth:!0},e),{},{error:!!o,helperText:null===o||void 0===o?void 0:o.message}))}}))}}),(0,E.jsx)(P.au,{name:"mandateIdentifier",label:e("companies.mandateIdentifier"),disabled:!0}),(0,E.jsx)(P.au,{name:"signatory",disabled:!0,label:e("companies.Signing")})]})})})})})}var N=i(73477),V=i(34207),F=i(32415),W=i(34940),z=i(7081),$=i(5448),B=i(71235),O=i(66382),X=i(58908),Q=i(16452);function H(e){var n=e.isEdit,i=void 0!==n&&n,o=e.currentCollaborartor,a=e.onClose,r=(0,v.nt)().translate,l=(0,x.I0)(),d=(0,S.Ds)().enqueueSnackbar,u=(0,x.v9)((function(e){return e.accounts})).isLoading,m=j.object().shape({name:j.string().required(r("companies.name_is_required")).max(30,r("companies.name_max")).matches(/^[a-zA-Z\xc0-\xff\s]+$/,r("companies.name_alpha")),position:j.string().required(r("settings.errors.Poste")).max(40,r("employee.poste_max")).min(2,r("employee.poste_min")),phone:j.string().required(r("settings.errors.Phone")).matches(/^((\d{9}))$/,r("employee.phone_invalid")),phoneCode:j.string().default(q.Gp),email:j.string().required(r("settings.errors.Email")).email(r("settings.errors.mail_invalid")).max(100,r("settings.errors.mail_invalid")),accountType:j.string().required(r("settings.errors.Access_level"))}),p=(0,s.useMemo)((function(){var e,n,i;return{name:(null===o||void 0===o?void 0:o.name)||"",position:(null===o||void 0===o?void 0:o.position)||"",phone:null!==o&&void 0!==o&&o.phone&&null!==(null===o||void 0===o?void 0:o.phone)?null===o||void 0===o||null===(e=o.phone)||void 0===e?void 0:e.replace(q.Sm,""):"",phoneCode:null!==o&&void 0!==o&&o.phone&&null!==(null===o||void 0===o?void 0:o.phone)?null===o||void 0===o?void 0:o.phone.slice(0,(null===o||void 0===o||null===(n=o.phone)||void 0===n?void 0:n.length)-(null===o||void 0===o||null===(i=o.phone)||void 0===i?void 0:i.replace(q.Sm,"").length)):q.Gp,email:(null===o||void 0===o?void 0:o.email)||"",accountType:(null===o||void 0===o?void 0:o.accountType)||""}}),[o]),h=(0,b.cI)({mode:"all",reValidateMode:"onChange",resolver:(0,y.X)(m),defaultValues:p}),Z=h.reset,C=h.handleSubmit;(0,s.useEffect)((function(){i&&o&&Z(p),i||Z(p)}),[i,o]);var w=function(){var e=(0,g.Z)((0,f.Z)().mark((function e(n){var i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={accountType:n.accountType,name:n.name,email:n.email,position:n.position,phone:"".concat(n.phoneCode).concat(n.phone)},l((0,Q.bg)({id:o.id,isLoading:!1,data:i,toast:d,translate:r,reset:Z,onClose:a}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,E.jsxs)(P.ZP,{methods:h,onSubmit:C(w),children:[(0,E.jsxs)(c.Z,{sx:{mt:"10px"},rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,E.jsx)(P.au,{name:"name",placeholder:"John Durand",label:r("settings.fields.last_name")}),(0,E.jsx)(P.au,{name:"position",placeholder:"DG",label:r("settings.fields.Poste")}),(0,E.jsx)(I.Z,{name:"phone",label:r("settings.fields.Phone"),itemName:"phoneCode",type:"phone",placeholder:"234567890"}),(0,E.jsx)(P.au,{name:"email",placeholder:"john@exemple.com",label:r("settings.fields.Email")})]}),(0,E.jsxs)(t.Z,{spacing:1,sx:{mt:"10px"},children:[(0,E.jsx)(k.Z,{variant:"subtitle1",sx:{color:"#919EAB",fontWeight:400},children:r("settings.fields.Access_level")}),(0,E.jsx)(P.km,{name:"accountType",options:[{label:r("settings.fields.Administrator"),value:"ADMIN"},{label:r("settings.fields.Manager"),value:"MANAGER"}],row:!0})]}),(0,E.jsxs)(t.Z,{justifyContent:"flex-end",direction:"row",sx:{mt:3,mb:3},children:[(0,E.jsx)(_.Z,{type:"submit",variant:"contained",loading:u,children:r("save")}),(0,E.jsx)(N.Z,{sx:{ml:"10px"},onClick:a,children:r("Cancel")})]})]})}var R=i(59017),J=i(18104);function U(e){var n=e.isEdit,i=void 0!==n&&n,a=e.currentCollaborartor,r=e.onClose,l=(0,v.nt)().translate,d=(0,x.I0)(),u=(0,S.Ds)().enqueueSnackbar,p=(0,x.v9)((function(e){return e.accounts})).isLoading,h=(0,s.useState)(!1),Z=(0,o.Z)(h,2),C=Z[0],w=Z[1],A=(0,s.useState)(!1),T=(0,o.Z)(A,2),G=T[0],L=T[1],D=j.object().shape({name:j.string().required(l("settings.errors.first_name")).max(30,l("companies.name_max")).matches(/^[a-zA-Z\xc0-\xff\s]+$/,l("companies.name_alpha")),position:j.string().required(l("settings.errors.Poste")).max(40,l("employee.poste_max")).min(2,l("employee.poste_min")),phone:j.string().required(l("settings.errors.Phone")).matches(/^((\d{9}))$/,l("employee.phone_invalid")),phoneCode:j.string().default(q.Gp),email:j.string().required(l("settings.errors.Email")).email(l("settings.errors.mail_invalid")).max(100,l("settings.errors.mail_invalid")),accountType:j.string().required(l("settings.errors.Access_level")),password:j.string().min(8,l("settings.Password_characters_long")),confirmPassword:j.string().min(8,l("settings.Password_characters_long")).required(l("settings.confirm_password_is_required")).oneOf([j.ref("password"),null],l("settings.passwords_must_match"))}),M=(0,s.useMemo)((function(){var e,n,i;return{name:(null===a||void 0===a?void 0:a.name)||"",position:(null===a||void 0===a?void 0:a.position)||"",phone:null!==a&&void 0!==a&&a.phone&&null!==(null===a||void 0===a?void 0:a.phone)?null===a||void 0===a||null===(e=a.phone)||void 0===e?void 0:e.replace(q.Sm,""):"",phoneCode:null!==a&&void 0!==a&&a.phone&&null!==(null===a||void 0===a?void 0:a.phone)?null===a||void 0===a?void 0:a.phone.slice(0,(null===a||void 0===a||null===(n=a.phone)||void 0===n?void 0:n.length)-(null===a||void 0===a||null===(i=a.phone)||void 0===i?void 0:i.replace(q.Sm,"").length)):q.Gp,email:(null===a||void 0===a?void 0:a.email)||"",accountType:(null===a||void 0===a?void 0:a.accountType)||""}}),[a]),V=(0,b.cI)({mode:"all",reValidateMode:"onChange",resolver:(0,y.X)(D),defaultValues:M}),F=V.reset,W=V.handleSubmit;(0,s.useEffect)((function(){i&&a&&F(M),i||F(M)}),[i,a]);var z=function(){var e=(0,g.Z)((0,f.Z)().mark((function e(n){var i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={accountType:n.accountType,name:n.name,email:n.email,position:n.position,phone:"".concat(n.phoneCode).concat(n.phone),temporaryPassword:n.password},d((0,Q.ux)({isLoading:!1,data:i,toast:u,translate:l,reset:F,onClose:r}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,E.jsxs)(P.ZP,{methods:V,onSubmit:W(z),children:[(0,E.jsxs)(c.Z,{sx:{mt:"10px"},rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,E.jsx)(P.au,{name:"name",label:l("settings.fields.last_name")}),(0,E.jsx)(P.au,{name:"position",label:l("settings.fields.Poste")}),(0,E.jsx)(I.Z,{name:"phone",label:l("settings.fields.Phone"),itemName:"phoneCode",type:"phone",placeholder:"234567890"}),(0,E.jsx)(P.au,{name:"email",label:l("settings.fields.Email")}),(0,E.jsx)(P.au,{name:"password",label:l("settings.new_password"),type:C?"text":"password",InputProps:{endAdornment:(0,E.jsx)(R.Z,{position:"end",children:(0,E.jsx)(J.Z,{onClick:function(){return w(!C)},edge:"end",children:(0,E.jsx)(m.Z,{icon:C?"eva:eye-fill":"eva:eye-off-fill"})})})}}),(0,E.jsx)(P.au,{name:"confirmPassword",label:l("settings.confirm_new_password"),type:G?"text":"password",InputProps:{endAdornment:(0,E.jsx)(R.Z,{position:"end",children:(0,E.jsx)(J.Z,{onClick:function(){return L(!G)},edge:"end",children:(0,E.jsx)(m.Z,{icon:G?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),(0,E.jsxs)(t.Z,{spacing:1,sx:{mt:"10px"},children:[(0,E.jsx)(k.Z,{variant:"subtitle1",sx:{color:"#919EAB",fontWeight:400},children:l("settings.fields.Access_level")}),(0,E.jsx)(P.km,{name:"accountType",options:[{label:l("settings.fields.Administrator"),value:"ADMIN"},{label:l("settings.fields.Manager"),value:"MANAGER"}],row:!0})]}),(0,E.jsxs)(t.Z,{justifyContent:"flex-end",direction:"row",sx:{mt:3,mb:3},children:[(0,E.jsx)(_.Z,{type:"submit",variant:"contained",loading:p,children:l("save")}),(0,E.jsx)(N.Z,{sx:{ml:"10px"},onClick:r,children:l("Cancel")})]})]})}function K(){var e=(0,v.nt)().translate,n=(0,X.Ds)().enqueueSnackbar,i=(0,x.I0)(),a=(0,x.v9)((function(e){return e.auth.user})),r=(0,x.v9)((function(e){return e.accounts})),l=r.accounts,d=r.refresh,u=r.isLoading,p=r.isLoadingData,h=(0,s.useState)(!1),j=(0,o.Z)(h,2),Z=j[0],b=j[1],y=(0,s.useState)(!1),C=(0,o.Z)(y,2),S=C[0],P=C[1],I=(0,s.useState)(!1),q=(0,o.Z)(I,2),A=q[0],T=q[1],G=(0,s.useState)(!1),L=(0,o.Z)(G,2),D=L[0],M=L[1],R=(0,s.useState)(!1),J=(0,o.Z)(R,2),K=J[0],Y=J[1],ee=(0,s.useState)({}),ne=(0,o.Z)(ee,2),ie=ne[0],oe=ne[1],ae=function(){b(!1)},se=function(){P(!1)},te=function(){T(!1)},re=function(){M(!1)},le=function(){Y(!1)},de=function(){var o=(0,g.Z)((0,f.Z)().mark((function o(){return(0,f.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i((0,Q.Qb)({isLoading:!1,id:ie.id,toast:n,translate:e,onClose:te}));case 1:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),ce=function(){var o=(0,g.Z)((0,f.Z)().mark((function o(){return(0,f.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i((0,Q.H4)({isLoading:!1,id:ie.id,toast:n,translate:e,onClose:re}));case 1:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),ue=function(){var o=(0,g.Z)((0,f.Z)().mark((function o(){return(0,f.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i((0,Q.X9)({isLoading:!1,id:ie.id,toast:n,translate:e,onClose:le}));case 1:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();return(0,s.useEffect)((function(){i((0,Q.A1)())}),[i,d]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(w.Z,{sx:{p:3},children:[(0,E.jsx)(t.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:3},children:(0,E.jsx)(k.Z,{variant:"overline",sx:{color:"text.secondary"},children:e("settings.listcollaborators")})}),(0,E.jsxs)(N.Z,{size:"small",onClick:function(){b(!0)},sx:{mb:2},children:[(0,E.jsx)(m.Z,{icon:"eva:plus-fill",sx:{mr:"5px"}}),e("settings.add_a_collaborator")]}),p?(0,E.jsx)(t.Z,{spacing:3,alignItems:"center",justifyContent:"center",children:(0,E.jsx)(V.Z,{})}):(0,E.jsx)(E.Fragment,{children:0===(null===l||void 0===l?void 0:l.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)})).length)?(0,E.jsx)(F.Z,{sx:{textAlign:"center"},children:(0,E.jsx)(k.Z,{variant:"h6",paragraph:!0,children:e("settings.no_collaborator")})}):(0,E.jsx)(t.Z,{spacing:3,divider:(0,E.jsx)(W.Z,{sx:{borderStyle:"dashed"}}),children:null===l||void 0===l?void 0:l.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)})).map((function(n){return(0,E.jsxs)(t.Z,{spacing:1,children:[(0,E.jsx)(k.Z,{variant:"subtitle1",children:n.name}),(0,E.jsx)(k.Z,{variant:"body2",children:n.accountType}),(0,E.jsxs)(k.Z,{variant:"body2",children:[(0,E.jsx)(c.Z,{component:"span",sx:{color:"text.secondary",mr:.5},children:"Address:"}),n.email]}),(0,E.jsxs)(k.Z,{variant:"body2",children:[(0,E.jsx)(c.Z,{component:"span",sx:{color:"text.secondary",mr:.5},children:"Phone:"}),null===n.phone&&e("unassigned")||n.phone]}),(0,E.jsxs)(t.Z,{direction:"row",spacing:1,children:[(0,E.jsx)(N.Z,{color:"error",size:"small",startIcon:(0,E.jsx)(m.Z,{icon:"eva:trash-2-outline"}),onClick:function(){return function(e){oe(e),T(!0)}(n)},children:e("settings.action.delete")}),(0,E.jsx)(N.Z,{size:"small",startIcon:(0,E.jsx)(m.Z,{icon:"eva:edit-fill"}),onClick:function(){return function(e){oe(e),P(!0)}(n)},children:e("settings.action.update")}),"ACTIVE"===n.status?(0,E.jsx)(N.Z,{color:"warning",size:"small",startIcon:(0,E.jsx)(m.Z,{icon:"fluent:presence-blocked-16-regular"}),onClick:function(){return function(e){oe(e),M(!0)}(n)},children:e("settings.action.disable")}):(0,E.jsx)(N.Z,{color:"warning",size:"small",startIcon:(0,E.jsx)(m.Z,{icon:"mdi:account-check"}),onClick:function(){return function(e){oe(e),Y(!0)}(n)},children:e("employee.activate")})]})]},n.id)}))})})]}),(0,E.jsxs)(z.Z,{open:Z,onClose:ae,children:[(0,E.jsx)($.Z,{children:e("settings.add_a_collaborator")}),(0,E.jsx)(B.Z,{children:(0,E.jsx)(U,{onClose:function(){return ae()}})})]}),(0,E.jsxs)(z.Z,{open:S,onClose:se,children:[(0,E.jsx)($.Z,{children:e("settings.update_a_collaborator")}),(0,E.jsx)(B.Z,{children:(0,E.jsx)(H,{onClose:function(){return se()},isEdit:!0,currentCollaborartor:ie})})]}),(0,E.jsxs)(z.Z,{open:A,onClose:te,children:[(0,E.jsx)($.Z,{children:e("settings.delete_a_collaborator")}),(0,E.jsx)(B.Z,{children:(0,E.jsx)(k.Z,{variant:"body2",children:(0,E.jsx)(c.Z,{component:"span",sx:{color:"text.secondary"},children:e("settings.descr_delete")})})}),(0,E.jsxs)(O.Z,{children:[(0,E.jsx)(_.Z,{variant:"contained",loading:u,onClick:de,children:e("confirm")}),(0,E.jsx)(N.Z,{onClick:te,children:e("Cancel")})]})]}),(0,E.jsxs)(z.Z,{open:D,onClose:re,children:[(0,E.jsx)($.Z,{children:e("settings.desactivate_a_collaborator")}),(0,E.jsx)(B.Z,{children:(0,E.jsx)(k.Z,{variant:"body2",children:(0,E.jsx)(c.Z,{component:"span",sx:{color:"text.secondary"},children:e("settings.descr_disabe")})})}),(0,E.jsxs)(O.Z,{children:[(0,E.jsx)(_.Z,{variant:"contained",onClick:ce,loading:u,children:e("confirm")}),(0,E.jsx)(N.Z,{onClick:re,children:e("Cancel")})]})]}),(0,E.jsxs)(z.Z,{open:K,onClose:le,children:[(0,E.jsx)($.Z,{children:e("settings.activate_a_collaborator")}),(0,E.jsx)(B.Z,{children:(0,E.jsx)(k.Z,{variant:"body2",children:(0,E.jsx)(c.Z,{component:"span",sx:{color:"text.secondary"},children:e("settings.descr_enable")})})}),(0,E.jsxs)(O.Z,{children:[(0,E.jsx)(_.Z,{variant:"contained",onClick:ue,loading:u,children:e("confirm")}),(0,E.jsx)(N.Z,{onClick:le,children:e("Cancel")})]})]})]})}function Y(){(0,S.Ds)().enqueueSnackbar;var e=(0,v.nt)().translate,n=((0,Z.s0)(),(0,x.v9)((function(e){return e.auth})).company),i=j.object().shape({name:j.string().required(e("settings.offer.errors.name")).max(20,e("companies.name_max"))}),o=(0,s.useMemo)((function(){return{configPricePerEmployee:(null===n||void 0===n?void 0:n.configPricePerEmployee)||0,configExtraChargesThreshold:(null===n||void 0===n?void 0:n.configExtraChargesThreshold)||0,configExtraChargesPercent:(null===n||void 0===n?void 0:n.configExtraChargesPercent)||0}}),[n]),a=(0,b.cI)({resolver:(0,y.X)(i),defaultValues:o}),t=(a.setValue,a.handleSubmit),r=a.reset,l=(a.formState.isSubmitting,function(){var e=(0,g.Z)((0,f.Z)().mark((function e(n){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());return(0,s.useEffect)((function(){(0,x.WI)((0,A.Hi)())}),[]),(0,s.useEffect)((function(){null!==n&&void 0!==n&&n.wiBoostOffer&&r(o)}),[n,o,r]),(0,E.jsx)(P.ZP,{methods:a,onSubmit:t(l),children:(0,E.jsx)(C.ZP,{container:!0,spacing:3,children:(0,E.jsx)(C.ZP,{item:!0,xs:12,md:12,children:(0,E.jsx)(w.Z,{sx:{p:3},children:(0,E.jsxs)(c.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,E.jsx)(P.au,{name:"configPricePerEmployee",type:"number",label:e("settings.offer.fileds.fixed_price"),disabled:!0}),(0,E.jsx)(P.au,{name:"configExtraChargesThreshold",type:"number",label:e("settings.offer.fileds.loading_threshold"),disabled:!0}),(0,E.jsx)(P.au,{name:"configExtraChargesPercent",type:"number",label:e("settings.offer.fileds.Percentage_over_threshold_loading"),disabled:!0})]})})})})})}function ee(){var e=(0,S.Ds)().enqueueSnackbar,n=(0,v.nt)().translate,i=(0,x.I0)(),a=(0,Z.s0)(),r=(0,x.v9)((function(e){return e.auth})),l=r.user,d=r.company,c=r.isLoading,u=j.object().shape({oldPassword:j.string().required(n("settings.old_password_is_required")).min(8,n("settings.Password_characters_long")),password:j.string().min(8,n("settings.Password_characters_long")),confirmPassword:j.string().min(8,n("settings.Password_characters_long")).required(n("settings.confirm_password_is_required")).oneOf([j.ref("password"),null],n("settings.passwords_must_match"))}),p=(0,s.useState)(!1),h=(0,o.Z)(p,2),C=h[0],k=h[1],I=(0,s.useState)(!1),q=(0,o.Z)(I,2),T=q[0],G=q[1],L=(0,s.useState)(!1),D=(0,o.Z)(L,2),M=D[0],N=D[1],V=(0,b.cI)({resolver:(0,y.X)(u),defaultValues:{oldPassword:"",password:"",confirmPassword:""}}),F=V.reset,W=V.handleSubmit,z=function(){var o=(0,g.Z)((0,f.Z)().mark((function o(s){return(0,f.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i((0,A.c0)({isLoading:!1,data:s,user:l,company:d,toast:e,navigate:a,translate:n,reset:F}));case 1:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}();return(0,E.jsx)(P.ZP,{methods:V,onSubmit:W(z),children:(0,E.jsx)(w.Z,{children:(0,E.jsxs)(t.Z,{spacing:3,alignItems:"flex-end",sx:{p:3},children:[(0,E.jsx)(P.au,{name:"oldPassword",label:n("settings.old_password"),type:C?"text":"password",InputProps:{endAdornment:(0,E.jsx)(R.Z,{position:"end",children:(0,E.jsx)(J.Z,{onClick:function(){return k(!C)},edge:"end",children:(0,E.jsx)(m.Z,{icon:C?"eva:eye-fill":"eva:eye-off-fill"})})})}}),(0,E.jsx)(P.au,{name:"password",label:n("settings.new_password"),type:T?"text":"password",InputProps:{endAdornment:(0,E.jsx)(R.Z,{position:"end",children:(0,E.jsx)(J.Z,{onClick:function(){return G(!T)},edge:"end",children:(0,E.jsx)(m.Z,{icon:T?"eva:eye-fill":"eva:eye-off-fill"})})})}}),(0,E.jsx)(P.au,{name:"confirmPassword",label:n("settings.confirm_new_password"),type:M?"text":"password",InputProps:{endAdornment:(0,E.jsx)(R.Z,{position:"end",children:(0,E.jsx)(J.Z,{onClick:function(){return N(!M)},edge:"end",children:(0,E.jsx)(m.Z,{icon:M?"eva:eye-fill":"eva:eye-off-fill"})})})}}),(0,E.jsx)(_.Z,{type:"submit",variant:"contained",loading:c,children:n("save")})]})})})}function ne(){var e,n,i,o=(0,S.Ds)().enqueueSnackbar,a=(0,v.nt)().translate,s=(0,Z.s0)(),r=(0,x.v9)((function(e){return e.auth})),l=r.user,d=r.isLoading,u=j.object().shape({name:j.string().required(a("companies.name_is_required")).max(30,a("companies.name_max")).matches(/^[a-zA-Z\xc0-\xff\s]+$/,a("companies.name_alpha")),email:j.string().email(a("companies.mail_invalid")).max(100,a("companies.mail_invalid")),phone:j.string().required(a("employee.phone_required")).matches(/^((\d{9}))$/,a("employee.phone_invalid")),phoneCode:j.string().default(q.Gp),position:j.string().required(a("companies.position_required")).max(40,a("employee.position_max")).min(2,a("employee.position_min"))}),m={name:(null===l||void 0===l?void 0:l.name)||"",email:(null===l||void 0===l?void 0:l.email)||"",position:(null===l||void 0===l?void 0:l.position)||"",phone:null!==l&&void 0!==l&&l.phone&&null!==(null===l||void 0===l?void 0:l.phone)?null===l||void 0===l||null===(e=l.phone)||void 0===e?void 0:e.replace(q.Sm,""):"",phoneCode:null!==l&&void 0!==l&&l.phone&&null!==(null===l||void 0===l?void 0:l.phone)?null===l||void 0===l?void 0:l.phone.slice(0,(null===l||void 0===l||null===(n=l.phone)||void 0===n?void 0:n.length)-(null===l||void 0===l||null===(i=l.phone)||void 0===i?void 0:i.replace(q.Sm,"").length)):q.Gp},p=(0,b.cI)({resolver:(0,y.X)(u),defaultValues:m,mode:"all",reValidateMode:"onChange"}),h=p.handleSubmit,k=p.formState.isDirty,T=function(){var e=(0,g.Z)((0,f.Z)().mark((function e(n){var i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={name:null===n||void 0===n?void 0:n.name,email:null===n||void 0===n?void 0:n.email,position:null===n||void 0===n?void 0:n.position,phone:"".concat(n.phoneCode).concat(n.phone)},(0,x.WI)((0,A.qW)({isLoading:!1,data:i,toast:o,translate:a,navigate:s}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,E.jsx)(P.ZP,{methods:p,onSubmit:h(T),children:(0,E.jsx)(C.ZP,{container:!0,spacing:3,children:(0,E.jsx)(C.ZP,{item:!0,xs:12,md:12,children:(0,E.jsxs)(w.Z,{sx:{p:3},children:[(0,E.jsxs)(c.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,E.jsx)(P.au,{name:"name",placeholder:"John Durand",label:a("companies.name")}),(0,E.jsx)(I.Z,{name:"phone",label:a("companies.phone"),itemName:"phoneCode",type:"phone",placeholder:"234567890"}),(0,E.jsx)(P.au,{name:"email",placeholder:"john@exemple.com",label:a("companies.email")}),(0,E.jsx)(P.au,{placeholder:"DG",name:"position",label:a("companies.position")})]}),(0,E.jsx)(t.Z,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:(0,E.jsx)(_.Z,{type:"submit",variant:"contained",loading:d,disabled:!k,children:a("save")})})]})})})})}function ie(){var e=(0,h.K$)().themeStretch,n=(0,v.nt)().translate,i=(0,s.useState)("profile"),f=(0,o.Z)(i,2),g=f[0],j=f[1],Z=(0,x.v9)((function(e){return e.auth})).user,b=[{value:"profile",label:n("profile"),icon:(0,E.jsx)(m.Z,{icon:"ic:round-account-box"}),component:(0,E.jsxs)(t.Z,{spacing:3,children:[(0,E.jsx)(ne,{}),(0,E.jsx)(T,{})]})},{value:"change_password",label:n("settings.change_password"),icon:(0,E.jsx)(m.Z,{icon:"ic:round-vpn-key"}),component:(0,E.jsx)(ee,{})},{value:"collaborators",label:n("settings.collaborators"),icon:(0,E.jsx)(m.Z,{icon:"carbon:collaborate"}),component:(0,E.jsx)(K,{})},{value:"offre",label:n("settings.offer.offer"),icon:(0,E.jsx)(m.Z,{icon:"mdi:offer"}),component:(0,E.jsx)(Y,{})},{value:"payment",label:n("settings.payment"),icon:(0,E.jsx)(m.Z,{icon:"fluent:payment-20-filled"}),component:(0,E.jsx)(M,{})}],y=[{value:"profile",label:n("profile"),icon:(0,E.jsx)(m.Z,{icon:"ic:round-account-box"}),component:(0,E.jsx)(ne,{})},{value:"change_password",label:n("settings.change_password"),icon:(0,E.jsx)(m.Z,{icon:"ic:round-vpn-key"}),component:(0,E.jsx)(ee,{})},{value:"offre",label:n("settings.offer.offer"),icon:(0,E.jsx)(m.Z,{icon:"mdi:offer"}),component:(0,E.jsx)(Y,{})}];return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(a.ql,{children:(0,E.jsxs)("title",{children:[" ",n("settings.settings")]})}),(0,E.jsxs)(r.Z,{maxWidth:!e&&"lg",children:[(0,E.jsx)(p.Z,{heading:n("settings.settings"),links:[{name:"Dashboard",href:u.vB.general.homeComany},{name:n("settings.settings"),href:u.vB.general.setting},{name:n(g)}]}),"ADMIN"===Z.accountType?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(l.Z,{value:g,onChange:function(e,n){return j(n)},children:b.map((function(e){return(0,E.jsx)(d.Z,{label:e.label,icon:e.icon,value:e.value},e.value)}))}),b.map((function(e){return e.value===g&&(0,E.jsx)(c.Z,{sx:{mt:5},children:e.component},e.value)}))]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(l.Z,{value:g,onChange:function(e,n){return j(n)},children:y.map((function(e){return(0,E.jsx)(d.Z,{label:e.label,icon:e.icon,value:e.value},e.value)}))}),y.map((function(e){return e.value===g&&(0,E.jsx)(c.Z,{sx:{mt:5},children:e.component},e.value)}))]})]})]})}}}]);