"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[763],{60167:function(e,t,n){n.d(t,{Z:function(){return y}});var o=n(1413),a=n(29439),r=n(45987),i=n(47313),l=n(75627),s=n(77914),d=n(59017),u=n(18104),m=n(6621),c=n(80133),p=n(18588),h=n(10978),v=n(94085),f=n(69862),x=n(46417),g=["itemName","name","helperText","type","endAdornment"];function y(e){var t=e.itemName,n=e.name,y=e.helperText,Z=e.type,b=e.endAdornment,j=(0,r.Z)(e,g),C=(0,l.Gc)().control,N=(0,c.nt)().currentLang,_=(0,f.S)(),D=(0,i.useState)(""),S=(0,a.Z)(D,2),w=S[0],q=S[1],k=(0,i.useState)(""),L=(0,a.Z)(k,2),Y=L[0],E=L[1],T=(0,i.useCallback)((function(e){q(e.target.value)}),[]),A=""!==w?p.h.filter((function(e){return-1!==e.labelFr.toLowerCase().indexOf(w.toLowerCase())||-1!==e.labelEn.toLowerCase().indexOf(w.toLowerCase())})):p.h;return"phone"===Z?(0,x.jsx)(l.Qr,{name:n,control:C,render:function(e){var n=e.field,a=e.fieldState.error;return(0,x.jsx)(s.Z,(0,o.Z)((0,o.Z)({},n),{},{fullWidth:!0,type:Z,value:"number"===Z&&0===n.value?"":n.value,onChange:function(e){"number"===Z?n.onChange(Number(e.target.value)):n.onChange(e.target.value)},error:!!a,helperText:a?null===a||void 0===a?void 0:a.message:y,InputProps:{startAdornment:(0,x.jsx)(l.Qr,{name:t,control:C,render:function(e){var t,n;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(d.Z,{position:"start",children:[(0,x.jsx)(u.Z,{onClick:_.onOpen,children:(0,x.jsx)(h.Z,{icon:"circle-flags:".concat(1===p.h.filter((function(t){return t.phone===e.field.value})).length||""===Y?null===(t=p.h.filter((function(t){return t.phone===e.field.value}))[0])||void 0===t?void 0:t.code.toLowerCase():null===(n=p.h.filter((function(t){return t.phone===e.field.value&&Y===t.id}))[0])||void 0===n?void 0:n.code.toLowerCase()),width:28})}),(0,x.jsxs)(f.Z,{open:_.open,onClose:_.onClose,children:[(0,x.jsx)(s.Z,{value:w,onChange:T,placeholder:"",fullWidth:!0,sx:{p:1}}),(0,x.jsx)(v.Z,{sx:{maxHeight:250,width:300},children:A.map((function(t){return(0,x.jsxs)(m.Z,{sx:{width:300},onClick:function(){e.field.onChange(t.phone),_.onClose(),E(t.id)},children:[(0,x.jsx)(h.Z,{icon:"circle-flags:".concat(null===t||void 0===t?void 0:t.code.toLowerCase()),width:28,sx:{mr:1}}),"fr"===N.value?null===t||void 0===t?void 0:t.labelFr:t.labelEn,"\xa0",null===t||void 0===t?void 0:t.phone]},t.id)}))})]})]}),(0,x.jsx)(d.Z,{position:"end",sx:{mr:1},children:e.field.value})]})}}),endAdornment:b}},j))}}):(0,x.jsx)(l.Qr,{name:n,control:C,render:function(e){var t=e.field,n=e.fieldState.error;return(0,x.jsx)(s.Z,(0,o.Z)((0,o.Z)({},t),{},{fullWidth:!0,type:Z,value:"number"===Z&&0===t.value?"":t.value,onChange:function(e){"number"===Z?t.onChange(Number(e.target.value)):t.onChange(e.target.value)},error:!!n,helperText:n?null===n||void 0===n?void 0:n.message:y},j))}})}},46327:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var o=n(65964),a=n(80941),r=n(76025),i=n(87130),l=n(24969),s=n(11589),d=n(80133),u=n(46417);function m(){var e=(0,i.K$)().themeStretch,t=(0,d.nt)().translate;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.ql,{children:(0,u.jsxs)("title",{children:[" ",t("employee.new_employee")]})}),(0,u.jsxs)(a.Z,{maxWidth:!e&&"lg",children:[(0,u.jsx)(l.Z,{heading:t("employee.add_new_employee"),links:[{name:"Dashboard",href:r.vB.general.homeComany},{name:t("employee.employees"),href:r.vB.employee.list},{name:t("employee.new_employee")}]}),(0,u.jsx)(s.Z,{})]})]})}},11589:function(e,t,n){n.d(t,{Z:function(){return M}});var o=n(1413),a=n(74165),r=n(15861),i=n(29439),l=n(69973),s=n(47313),d=n(58467),u=n(2135),m=(n(87131),n(75627)),c=n(62563),p=n(32703),h=n(82937),v=n(92484),f=n(42669),x=n(16157),g=n(77914),y=n(6621),Z=n(62463),b=n(73477),j=n(43394),C=n(32091),N=n(72905),_=n(76025),D=n(68986),S=n(11154),w=n(60167),q=n(80133),k=n(63129),L=n(1333),Y=n(84271),E=n(2464),T=(n(32454),n(70816)),A=n.n(T),I=n(46417);function M(e){var t=e.isEdit,n=void 0!==t&&t,T=e.currentEmployee,M=(0,d.s0)(),P=(0,q.nt)(),F=P.translate,G=P.currentLang,W=(0,L.I0)(),z=(0,D.Ds)().enqueueSnackbar,H=(0,L.v9)((function(e){return e.categories})).categories,B=(0,L.v9)((function(e){return e.employee})).isEmployeeLoading,O=(0,s.useState)(!1),Q=(0,i.Z)(O,2),$=(Q[0],Q[1],(0,s.useState)(!1)),V=(0,i.Z)($,2),K=V[0],R=V[1],U=(0,s.useState)(!1),X=(0,i.Z)(U,2),J=(X[0],X[1],l.object().shape({firstName:l.string().required(F("employee.first_name_required")).max(20,F("employee.firstName_max")).matches(/^[a-zA-Z\xc0-\xff\s]+$/,F("employee.firstName_alpha")),lastName:l.string().required(F("employee.last_name_required")).max(20,F("employee.lastName_max")).matches(/^[a-zA-Z\xc0-\xff\s]+$/,F("employee.lastName_alpha")),email:l.string().required(F("employee.email_required")).email(F("employee.mail_invalid")).max(100,F("employee.mail_invalid")),phone:l.string().required(F("employee.phone_required")).matches(/^((\d{9}))$/,F("employee.phone_invalid")),phoneCode:l.string().default(k.Gp),position:l.string().required(F("companies.position_required")).max(40,F("employee.position_max")).min(2,F("employee.position_min")),registrationNumber:l.string().max(20,F("employee.identifier_max")),category:l.string().required(F("employee.cagnotte_required")),startDate:l.date().nullable().required(F("employee.contract.startDate_required"))})),ee=(0,s.useMemo)((function(){var e,t,n,o,a,r,i,l,s,d,u,m;return{firstName:(null===T||void 0===T||null===(e=T.employee)||void 0===e?void 0:e.firstName)||"",lastName:(null===T||void 0===T||null===(t=T.employee)||void 0===t?void 0:t.lastName)||"",email:(null===T||void 0===T||null===(n=T.employee)||void 0===n?void 0:n.email)||"",position:(null===T||void 0===T||null===(o=T.contract)||void 0===o?void 0:o.position)||"",category:(null===T||void 0===T||null===(a=T.contract)||void 0===a?void 0:a.categoryId)||"",registrationNumber:(null===T||void 0===T||null===(r=T.contract)||void 0===r?void 0:r.registrationNumber)||"",phone:(null===T||void 0===T||null===(i=T.employee)||void 0===i?void 0:i.phone.replace(k.Sm,""))||"",phoneCode:null!==T&&void 0!==T&&null!==(l=T.employee)&&void 0!==l&&l.phone?null===T||void 0===T||null===(s=T.employee)||void 0===s?void 0:s.phone.slice(0,(null===(d=T.employee)||void 0===d?void 0:d.phone.length)-(null===(u=T.employee)||void 0===u?void 0:u.phone.replace(k.Sm,"").length)):k.Gp,startDate:(null===T||void 0===T||null===(m=T.contract)||void 0===m?void 0:m.startDate)||new Date}}),[T]),te=(0,m.cI)({mode:"all",reValidateMode:"onChange",resolver:(0,c.X)(J),defaultValues:ee}),ne=te.watch,oe=te.control,ae=ne(),re=te.reset,ie=te.handleSubmit,le=te.formState.isDirty;(0,s.useEffect)((function(){n&&T&&re(ee),n||re(ee)}),[n,T]);var se=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var o,r,i,l,s,d,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={startDate:A()(new Date(null===(o=t.startDate)||void 0===o?void 0:o.toString())).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),position:t.position,registrationNumber:t.registrationNumber},n?(s={firstName:t.firstName,lastName:t.lastName,email:t.email,phone:"".concat(t.phoneCode).concat(t.phone),position:t.position},d=function(){return(null===ee||void 0===ee?void 0:ee.category)!==ae.category},u=(null===ee||void 0===ee?void 0:ee.startDate)!==ae.startDate||(null===ee||void 0===ee?void 0:ee.position)!==ae.position||(null===ee||void 0===ee?void 0:ee.registrationNumber)!==ae.registrationNumber,d()?W((0,Y.Oi)({data:s,dataContract:u?r:null,currentEmployee:T,navigate:M,translate:F,categoryId:t.category,toast:z})):W((0,Y.vV)({data:s,dataContract:u?r:null,currentEmployee:T,navigate:M,translate:F,toast:z}))):(l={firstName:t.firstName,lastName:t.lastName,email:t.email,phone:"".concat(t.phoneCode).concat(t.phone),position:t.position,assignedCategoryId:parseInt(t.category),registrationNumber:t.registrationNumber,startDate:A()(new Date(null===(i=t.startDate)||void 0===i?void 0:i.toString())).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")},W((0,Y.vu)({data:l,dataContract:r,navigate:M,translate:F,toast:z})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){W((0,E.kw)({}))}),[W]),(0,I.jsx)(S.ZP,{methods:te,onSubmit:ie(se),children:(0,I.jsx)(h.ZP,{spacing:3,children:(0,I.jsx)(h.ZP,{item:!0,xs:12,md:8,children:(0,I.jsxs)(v.Z,{sx:{p:3},children:[(0,I.jsx)(f.Z,{variant:"subtitle2",sx:{color:"text.secondary",mb:3},children:F("employee.infos_employee")}),(0,I.jsxs)(x.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,I.jsx)(S.au,{name:"firstName",label:F("employee.first_name"),placeholder:"john"}),(0,I.jsx)(S.au,{name:"lastName",label:F("employee.last_name"),placeholder:"Durand"}),(0,I.jsx)(S.au,{name:"email",label:F("Email"),placeholder:"john@exemple.com"}),(0,I.jsx)(w.Z,{name:"phone",label:F("Phone"),itemName:"phoneCode",type:"phone",placeholder:"234567890"}),(0,I.jsx)(S.au,{name:"position",label:F("companies.position"),placeholder:"DG"}),(0,I.jsx)(S.au,{name:"registrationNumber",label:F("employee.identifier"),placeholder:"ABC001"}),(0,I.jsx)(j._,{dateAdapter:N.y,adapterLocale:G.value,children:(0,I.jsx)(m.Qr,{name:"startDate",control:oe,render:function(e){var t=e.field,n=e.fieldState.error;return(0,I.jsx)(C.M,(0,o.Z)((0,o.Z)({},t),{},{label:F("employee.contract.startDate"),inputFormat:"DD/MM/YYYY",disableFuture:!0,open:K,onClose:function(){return R(!1)},renderInput:function(e){return(0,I.jsx)(g.Z,(0,o.Z)((0,o.Z)({size:"medium",fullWidth:!0},e),{},{error:!!n,helperText:null===n||void 0===n?void 0:n.message,onClick:function(){return R(!0)}}))}}))}})}),(0,I.jsx)(S.Cc,{fullWidth:!0,name:"category",label:F("cagnotte.cagnotte"),InputLabelProps:{shrink:!0},SelectProps:{native:!1,sx:{textTransform:"capitalize"}},children:null===H||void 0===H?void 0:H.map((function(e){return(0,I.jsx)(y.Z,{value:e.id,sx:{mx:1,my:.5,borderRadius:.75,typography:"body2",textTransform:"capitalize","&:first-of-type":{mt:0},"&:last-of-type":{mb:0}},children:e.name},e.id)}))})]}),(0,I.jsx)(Z.Z,{spacing:3,children:(0,I.jsxs)(x.Z,{sx:{textAlign:"right",mt:3},children:[(0,I.jsx)(b.Z,{component:u.rU,to:_.vB.employee.list,variant:"outlined",color:"inherit",sx:{mr:1},children:F("Cancel")}),(0,I.jsx)(p.Z,{disabled:!le,type:"submit",variant:"contained",loading:B,children:F("save")})]})})]})})})})}}}]);