"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[514],{90514:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var i=t(47313),a=t(65964),r=t(80941),l=t(82937),s=t(76025),o=t(1333),c=t(4277),d=t(24969),u=t(87130),m=t(80133),h=t(74165),x=t(15861),v=t(69973),p=t(75627),f=t(62563),g=t(92484),j=t(62463),Z=t(34940),b=t(16157),E=t(42669),N=t(73477),y=t(32703),P=t(10978),_=t(11154),S=t(46417);function C(){var e=(0,m.nt)().translate,n=(0,o.I0)(),t=(0,o.v9)((function(e){return e.rechargement.rechargementEvent})).employees,a=(0,o.v9)((function(e){return e.rechargement})).isLoadingEvent,r=[{id:1,name:"Naissance",label:e("EVENEMENT_OPTIONS.Birth")},{id:2,name:"Adoption",label:e("EVENEMENT_OPTIONS.Adoption")},{id:3,name:"Mariage",label:e("EVENEMENT_OPTIONS.Wedding")},{id:4,name:"Le Pacs",label:e("EVENEMENT_OPTIONS.Le_Pacs")},{id:5,name:"D\xe9part \xe0 la retraitre",label:e("EVENEMENT_OPTIONS.Retirement")},{id:6,name:"la f\xeate des m\xe8res",label:e("EVENEMENT_OPTIONS.mother_day")},{id:7,name:"la f\xeate des p\xe8res",label:e("EVENEMENT_OPTIONS.father_day")},{id:8,name:"sainte catherine",label:e("EVENEMENT_OPTIONS.saint_catherine")},{id:9,name:"la saint nicolas",label:e("EVENEMENT_OPTIONS.the_saint_nicholas")},{id:10,name:"No\xebl",label:e("EVENEMENT_OPTIONS.Christmas")},{id:11,name:"la rentr\xe9e scolaire",label:e("EVENEMENT_OPTIONS.back_to_school")}],s=v.object().shape({items:v.array().of(v.object().shape({event:v.string().required(e("rechargementPage.event.event_required")),quantity:v.number().required(e("rechargementPage.event.quantity")).typeError(e("invalid_value")).min(1,e("rechargementPage.event.quantity_more_than")).max(1e3,e("rechargementPage.event.value_less_than")),value:v.number().required(e("rechargementPage.event.value")).typeError(e("invalid_value")).min(1,e("rechargementPage.event.value_more_than")).max(1e3,e("rechargementPage.event.value_less_than"))}))}),d=(0,p.cI)({mode:"all",resolver:(0,f.X)(s)}),u=d.watch,C=d.setValue,w=d.trigger,I=d.handleSubmit,k=u(),T=(0,i.useCallback)((function(e,n){C("items[".concat(n,"].quantity"),e.target.value),w("items[".concat(n,"].quantity")),C("items[".concat(n,"].total"),k.items.map((function(e){return e.quantity*e.value?e.quantity*e.value:""}))[n])}),[C,k.items]),O=(0,i.useCallback)((function(e,n){C("items[".concat(n,"].value"),e.target.value),w("items[".concat(n,"].value")),C("items[".concat(n,"].total"),k.items.map((function(e){return e.quantity*e.value?e.quantity*e.value:""}))[n])}),[C,k.items]),M=function(){n((0,c.B8)())},q=function(){var e=(0,x.Z)((0,h.Z)().mark((function e(i){var a,r,l,s;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a={forAdvantageType:"GIFT",lines:[]},r=0;r<i.items.length;r++)s={forEmployeeContractId:null===(l=t[r].contract)||void 0===l?void 0:l.id,amount:i.items[r].total,reason:i.items[r].event},a.lines.push(s);n((0,c.Nu)({data:a,onNextStep:M}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,S.jsx)(g.Z,{sx:{pt:3,pr:3,pl:3},children:(0,S.jsx)(j.Z,{flexGrow:1,spacing:3,children:(0,S.jsxs)(_.ZP,{methods:d,onSubmit:I(q),children:[(0,S.jsx)(l.ZP,{container:!0,spacing:3,children:(0,S.jsxs)(l.ZP,{item:!0,xs:12,md:12,children:[(0,S.jsx)(j.Z,{divider:(0,S.jsx)(Z.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:3,children:null===t||void 0===t?void 0:t.map((function(n,t){return(0,S.jsx)(j.Z,{children:(0,S.jsxs)(j.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:1},children:[(0,S.jsx)(b.Z,{sx:{display:"flex",alignItems:"center",minWidth:{md:160}},children:(0,S.jsx)(E.Z,{variant:"subtitle1",sx:{textTransform:"capitalize"},children:n.firstName+" "+n.lastName})}),(0,S.jsxs)(_.Cc,{name:"items[".concat(t,"].event"),label:e("rechargementPage.event.Event"),size:"small",children:[(0,S.jsx)("option",{value:""}),r.map((function(e){return(0,S.jsx)("option",{value:e.name,children:e.label},e.id)}))]}),(0,S.jsx)(_.au,{name:"items[".concat(t,"].quantity"),label:e("rechargementPage.event.quantity_field"),size:"small",placeholder:e("tax.writing"),InputLabelProps:{shrink:!0},onChange:function(e){return T(e,t)}}),(0,S.jsx)(_.au,{name:"items[".concat(t,"].value"),label:e("rechargementPage.event.value_field"),size:"small",placeholder:e("tax.writing"),InputLabelProps:{shrink:!0},onChange:function(e){return O(e,t)}}),(0,S.jsx)(_.au,{name:"items[".concat(t,"].total"),label:"total",size:"small",disabled:!0,placeholder:e("total"),InputLabelProps:{shrink:!0}})]})},n.id)}))}),(0,S.jsxs)(j.Z,{direction:"row",alignItems:"center",spacing:3,justifyContent:"space-between",sx:{mt:3},children:[(0,S.jsx)(N.Z,{size:"small",color:"inherit",onClick:function(){n((0,c.gy)())},startIcon:(0,S.jsx)(P.Z,{icon:"eva:arrow-ios-back-fill"}),children:e("back")}),(0,S.jsx)(y.Z,{loading:a,sx:{mt:3},type:"submit",variant:"contained",children:e("next")})]})]})}),"."]})})})}var w=t(29439),I=t(34207),k=t(39874),T=t(44874),O=t(53805),M=t(59629),q=t(37982),V=t(41769),R=t(61911),F=t(94085),L=t(28840),W=t(30409),A=t(38618);function B(e){var n=e.isNotFound,t=(0,m.nt)().translate;return(0,S.jsx)(M.Z,{children:n?(0,S.jsx)(q.Z,{colSpan:12,children:(0,S.jsx)(A.Z,{title:t("empty_table.no_employe_for_reload_event"),sx:{"& span.MuiBox-root":{height:160}}})}):(0,S.jsx)(q.Z,{colSpan:12,sx:{p:0}})})}var z=t(63129),D=t(84271),K=t(2464);v.object().shape({selected:v.array().min(1,"At least one skill is required")});function G(){var e,n=(0,o.v9)((function(e){return e.employee})),t=n.employees,a=n.isLoading,r=(0,o.v9)((function(e){return e.categories})),l=r.refresh,s=r.categories,d=(0,L.x6)(),u=d.dense,v=d.page,f=d.order,Z=d.orderBy,y=d.rowsPerPage,P=d.setPage,_=d.selected,C=d.onSelectRow,A=d.onSelectAllRows,G=d.onSort,X=d.onChangePage,H=d.onChangeRowsPerPage,J=(0,i.useState)([]),$=(0,w.Z)(J,2),Q=$[0],U=$[1],Y=(0,m.nt)().translate,ee=(0,i.useState)(""),ne=(0,w.Z)(ee,2),te=ne[0],ie=ne[1],ae=[{id:"last_name",label:Y("employee.last_name")},{id:"email",label:Y("Email")},{id:"phone",label:Y("companies.phone")}],re=(0,p.cI)({reValidateMode:"onChange",defaultValues:{selected:[]}}),le=re.handleSubmit,se=function(){var e=(0,x.Z)((0,h.Z)().mark((function e(n){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,o.WI)((0,c.sX)(_)),(0,o.WI)((0,c.B8)());case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),oe=function(e){var n,t=e.inputData,i=e.filterName;i&&(t=null===(n=t)||void 0===n?void 0:n.filter((function(e){var n,t;return-1!==(null===(n=e.lastName)||void 0===n?void 0:n.toLowerCase().indexOf(null===i||void 0===i?void 0:i.toLowerCase()))||-1!==(null===(t=e.firstName)||void 0===t?void 0:t.toLowerCase().indexOf(null===i||void 0===i?void 0:i.toLowerCase()))})));return t}({inputData:Q,filterName:te}),ce=""!==te;return(0,i.useEffect)((function(){(0,o.WI)((0,D.VB)({}))}),[]),(0,i.useEffect)((function(){(0,o.WI)((0,K.kw)({}))}),[l]),(0,i.useEffect)((function(){if(null!==t&&void 0!==t&&t.length){var e=[];null===t||void 0===t||t.filter((function(e){return"ACTIVE"===e.status||"CREATED"===e.status})).forEach((function(n){var t,i=s.find((function(e){var t;return e.id===(null===(t=n.category)||void 0===t?void 0:t.id)}));void 0!==i&&((null===i||void 0===i||null===(t=i.advantages)||void 0===t?void 0:t.findIndex((function(e){return e.type===z.KN.gift})))>-1&&e.push(n))})),U(e)}}),[s,t]),(0,S.jsx)(g.Z,{sx:{mb:3},children:(0,S.jsx)(j.Z,{flexGrow:1,spacing:1,children:(0,S.jsxs)(R.Z,{methods:re,onSubmit:le(se),children:[a?(0,S.jsx)(b.Z,{sx:{display:"flex",flex:1,alignItems:"center",justifyContent:"center",height:300,width:"100%"},children:(0,S.jsx)(I.Z,{size:40,color:"primary"})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(W.Z,{isFiltered:ce,filterName:te,onFilterName:function(e){P(0),ie(e.target.value)},onResetFilter:function(){ie("")}}),(0,S.jsx)(k.Z,{sx:{position:"relative",overflow:"unset"},children:(0,S.jsxs)(F.Z,{children:[(0,S.jsx)(L.Z4,{dense:u,numSelected:null===_||void 0===_?void 0:_.length,rowCount:null===Q||void 0===Q?void 0:Q.length,onSelectAllRows:function(e){return A(e,null===Q||void 0===Q?void 0:Q.map((function(e){return e.id})))}}),(0,S.jsxs)(T.Z,{sx:{minWidth:800},children:[(0,S.jsx)(L.K,{order:f,orderBy:Z,headLabel:ae,rowCount:null===Q||void 0===Q?void 0:Q.length,numSelected:null===_||void 0===_?void 0:_.length,onSort:G,onSelectAllRows:function(e){return A(e,null===Q||void 0===Q?void 0:Q.map((function(e){return e})))}}),(0,S.jsxs)(O.Z,{children:[null===oe||void 0===oe||null===(e=oe.slice(v*y,v*y+y))||void 0===e?void 0:e.map((function(e,n){return(0,S.jsxs)(M.Z,{hover:!0,children:[(0,S.jsx)(q.Z,{padding:"checkbox",children:(0,S.jsx)(V.Z,{checked:null===_||void 0===_?void 0:_.includes(e),onClick:function(){return C(e)}})}),(0,S.jsx)(q.Z,{align:"left",children:(0,S.jsxs)(E.Z,{variant:"subtitle2",noWrap:!0,sx:{textTransform:"capitalize"},children:[""===(null===e||void 0===e?void 0:e.firstName)&&Y("unassigned")||e.firstName,"\xa0",""===e.lastName&&Y("unassigned")||e.lastName]})}),(0,S.jsx)(q.Z,{align:"left",children:(""===e.email||null===e.email)&&Y("unassigned")||" "+e.email}),(0,S.jsx)(q.Z,{children:""===e.phone&&Y("unassigned")||e.phone})]},e.id)})),0===(null===oe||void 0===oe?void 0:oe.length)&&(0,S.jsx)(B,{isNotFound:!0})]})]})]})}),(0,S.jsx)(L.S_,{count:null===oe||void 0===oe?void 0:oe.length,page:v,rowsPerPage:y,onPageChange:X,onRowsPerPageChange:H})]}),(0,S.jsx)(j.Z,{spacing:3,children:(0,S.jsx)(b.Z,{sx:{textAlign:"right"},children:(0,S.jsx)(N.Z,{sx:{m:3},type:"submit",variant:"contained",disabled:0===oe.length||0===(null===_||void 0===_?void 0:_.length),children:Y("next")})})})]})})})}var X=t(58467),H=t(70224),J=t(89886);function $(e){var n=e.open,t=(0,m.nt)().translate,i=(0,o.I0)(),a=(0,X.s0)();return(0,S.jsx)(J.Kl,{fullScreen:!0,open:n,PaperProps:{sx:{maxWidth:{md:"calc(100% - 48px)"},maxHeight:{md:"calc(100% - 48px)"}}},children:(0,S.jsxs)(j.Z,{spacing:5,sx:{m:"auto",maxWidth:480,textAlign:"center",px:{xs:2,sm:0}},children:[(0,S.jsx)(E.Z,{variant:"h4",children:t("rechargementPage.event.completed")}),(0,S.jsx)(H.Jt,{sx:{height:260}}),(0,S.jsxs)(E.Z,{children:[(0,S.jsx)("br",{})," ",t("rechargementPage.event.continue")]}),(0,S.jsx)(Z.Z,{sx:{borderStyle:"dashed"}}),(0,S.jsx)(j.Z,{spacing:2,justifyContent:"space-between",direction:{xs:"column-reverse",sm:"row"},children:(0,S.jsx)(N.Z,{fullWidth:!0,size:"large",color:"inherit",variant:"outlined",onClick:function(){a(s.vB.rechargement.root),i((0,c.lF)())},startIcon:(0,S.jsx)(P.Z,{icon:"eva:arrow-ios-back-fill"}),children:t("rechargementPage.event.buttonContinue")})})]})})}var Q=t(79624);function U(){var e=(0,u.K$)().themeStretch,n=(0,o.I0)(),t=(0,m.nt)().translate,h=[t("employee.employees"),t("rechargementPage.gifts")],x=(0,o.v9)((function(e){return null===e||void 0===e?void 0:e.rechargement})).rechargementEvent.activeStep,v=x===h.length;return(0,i.useEffect)((function(){n((0,c.p9)()),0===x&&n((0,c.sX)(null))}),[n,x]),(0,i.useEffect)((function(){n((0,c.lF)())}),[n]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(a.ql,{children:(0,S.jsxs)("title",{children:[" ",t("Rechargment")]})}),(0,S.jsxs)(r.Z,{maxWidth:!e&&"lg",children:[(0,S.jsx)(d.Z,{heading:t("Rechargment"),links:[{name:t("Dashboard"),href:s.vB.general.homeComany},{name:t("Rechargment"),href:s.vB.rechargement.root},{name:t("rechargementPage.Reloading_exceptional_events")}]}),(0,S.jsx)(l.ZP,{container:!0,justifyContent:v?"center":"flex-start",children:(0,S.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,S.jsx)(Q.Z,{activeStep:x,steps:h})})}),v?(0,S.jsx)($,{open:v}):(0,S.jsxs)(S.Fragment,{children:[0===x&&(0,S.jsx)(G,{}),1===x&&(0,S.jsx)(C,{})]})]})]})}},30409:function(e,n,t){t.d(n,{Z:function(){return d}});var i=t(62463),a=t(77914),r=t(59017),l=t(73477),s=t(80133),o=t(10978),c=t(46417);function d(e){var n=e.isFiltered,t=e.filterName,d=e.onFilterName,u=e.onResetFilter,m=(0,s.nt)().translate;return(0,c.jsxs)(i.Z,{spacing:2,alignItems:"center",direction:{xs:"column",sm:"row"},sx:{px:2.5,py:3},children:[(0,c.jsx)(a.Z,{fullWidth:!0,value:t,onChange:d,placeholder:m("search"),InputProps:{startAdornment:(0,c.jsx)(r.Z,{position:"start",children:(0,c.jsx)(o.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),n&&(0,c.jsx)(l.Z,{color:"error",sx:{flexShrink:0},onClick:u,startIcon:(0,c.jsx)(o.Z,{icon:"eva:trash-2-outline"}),children:m("clear")})]})}},79624:function(e,n,t){t.d(n,{Z:function(){return p}});var i=t(1413),a=t(45987),r=t(64164),l=t(35711),s=t(2074),o=t(95895),c=t(98368),d=t(62463),u=t(16157),m=t(10978),h=t(46417),x=["steps","activeStep","sx"],v=(0,r.ZP)(l.Z)((function(e){var n=e.theme;return{top:10,left:"calc(-50% + 20px)",right:"calc(50% + 20px)","& .MuiStepConnector-line":{borderTopWidth:2,borderColor:n.palette.divider},"&.Mui-active, &.Mui-completed":{"& .MuiStepConnector-line":{borderColor:n.palette.primary.main}}}}));function p(e){var n=e.steps,t=e.activeStep,r=e.sx,l=(0,a.Z)(e,x);return(0,h.jsx)(s.Z,(0,i.Z)((0,i.Z)({alternativeLabel:!0,activeStep:t,connector:(0,h.jsx)(v,{}),sx:(0,i.Z)({mb:5},r)},l),{},{children:n.map((function(e){return(0,h.jsx)(o.Z,{children:(0,h.jsx)(c.Z,{StepIconComponent:f,sx:{"& .MuiStepLabel-label":{typography:"subtitle2"}},children:e})},e)}))}))}function f(e){var n=e.active,t=e.completed;return(0,h.jsx)(d.Z,{alignItems:"center",justifyContent:"center",sx:(0,i.Z)({width:24,height:24,color:"text.disabled"},n&&{color:"primary.main"}),children:t?(0,h.jsx)(m.Z,{icon:"eva:checkmark-fill",sx:{color:"primary.main"}}):(0,h.jsx)(u.Z,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:"currentColor"}})})}}}]);