"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[460],{32460:function(e,n,i){i.r(n),i.d(n,{default:function(){return X}});var t=i(29439),o=i(65964),l=i(47313),r=i(58467),s=i(80941),a=i(73477),d=i(92484),c=i(39874),u=i(62463),v=i(83719),g=i(18104),h=i(44874),x=i(53805),f=i(7081),m=i(5448),j=i(71235),p=i(32703),Z=i(76025),w=i(10978),C=i(94085),S=i(49657),y=i(24969),b=i(68986),k=i(87130),_=i(28840),P=i(74165),N=i(15861),R=i(16157),F=i(34207),D=i(59629),I=i(37982),L=i(41769),E=i(61911),W=i(58908),A=i(75627),B=i(77914),O=i(59017),z=i(80133),q=i(46417);function K(e){var n=e.isFiltered,i=e.filterName,t=e.onFilterName,o=e.onResetFilter,l=(0,z.nt)().translate;return(0,q.jsxs)(u.Z,{spacing:2,alignItems:"center",direction:{xs:"column",sm:"row"},sx:{mb:3},children:[(0,q.jsx)(B.Z,{size:"small",fullWidth:!0,value:i,onChange:t,placeholder:l("search"),InputProps:{startAdornment:(0,q.jsx)(O.Z,{position:"start",children:(0,q.jsx)(w.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),n&&(0,q.jsx)(a.Z,{color:"error",sx:{flexShrink:0},onClick:o,startIcon:(0,q.jsx)(w.Z,{icon:"eva:trash-2-outline"}),children:l("clear")})]})}var V=i(1333),M=i(84271),Q=i(2464);function T(e){var n,i=e.onClose,o=(0,W.Ds)().enqueueSnackbar,s=(0,r.s0)(),d=(0,z.nt)().translate,v=(0,r.UO)().id,g=(0,l.useState)(""),f=(0,t.Z)(g,2),m=f[0],j=f[1],Z=(0,l.useState)([]),w=(0,t.Z)(Z,2),S=w[0],y=w[1],b=(0,V.v9)((function(e){return e.employee})),k=b.employees,B=b.isLoading,O=(0,V.v9)((function(e){return e.categories})),T=O.refresh,U=O.categories,$=O.isLoading,G=(0,_.x6)(),Y=G.dense,H=G.page,J=G.order,X=G.orderBy,ee=G.rowsPerPage,ne=G.setPage,ie=G.selected,te=G.onSelectRow,oe=G.onSelectAllRows,le=G.onSort,re=G.onChangePage,se=G.onChangeRowsPerPage,ae=[{id:"last_name",label:d("employee.last_name")},{id:"first_name",label:d("employee.first_name")},{id:"category",label:d("employee.kitty"),align:"center"}],de=(0,A.cI)({reValidateMode:"onChange"}),ce=de.handleSubmit,ue=function(){var e=(0,N.Z)((0,P.Z)().mark((function e(n){return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,V.WI)((0,Q.uY)({cagnotteId:v,navigate:s,toast:o,translate:d,selected:ie,onClose:i}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ve=function(e){var n,i=e.inputData,t=e.filterName;t&&(i=null===(n=i)||void 0===n?void 0:n.filter((function(e){var n,i;return-1!==(null===(n=e.lastName)||void 0===n?void 0:n.toLowerCase().indexOf(null===t||void 0===t?void 0:t.toLowerCase()))||-1!==(null===(i=e.firstName)||void 0===i?void 0:i.toLowerCase().indexOf(null===t||void 0===t?void 0:t.toLowerCase()))})));return i}({inputData:S,filterName:m}),ge=""!==m;return(0,l.useEffect)((function(){(0,V.WI)((0,M.VB)({}))}),[]),(0,l.useEffect)((function(){(0,V.WI)((0,Q.kw)({}))}),[T]),(0,l.useEffect)((function(){null!==k&&void 0!==k&&k.length&&y(null===k||void 0===k?void 0:k.filter((function(e){var n;return(null===(n=e.category)||void 0===n?void 0:n.id.toString())!==v&&"DELETED"!==(null===e||void 0===e?void 0:e.status)})))}),[U,k,v]),(0,q.jsx)(u.Z,{flexGrow:1,spacing:1,children:(0,q.jsx)(E.Z,{methods:de,onSubmit:ce(ue),children:B?(0,q.jsx)(R.Z,{sx:{display:"flex",flex:1,alignItems:"center",justifyContent:"center",height:300,width:"100%"},children:(0,q.jsx)(F.Z,{size:40,color:"primary"})}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(K,{isFiltered:ge,filterName:m,onFilterName:function(e){ne(0),j(e.target.value)},onResetFilter:function(){j("")}}),(0,q.jsx)(c.Z,{sx:{position:"relative",overflow:"unset"},children:(0,q.jsxs)(C.Z,{children:[(0,q.jsx)(_.Z4,{dense:Y,numSelected:null===ie||void 0===ie?void 0:ie.length,rowCount:null===S||void 0===S?void 0:S.length,onSelectAllRows:function(e){return oe(e,null===S||void 0===S?void 0:S.map((function(e){return e.id})))}}),(0,q.jsxs)(h.Z,{children:[(0,q.jsx)(_.K,{order:J,orderBy:X,headLabel:ae,rowCount:null===S||void 0===S?void 0:S.length,numSelected:null===ie||void 0===ie?void 0:ie.length,onSort:le,onSelectAllRows:function(e){return oe(e,null===S||void 0===S?void 0:S.map((function(e){return e})))}}),(0,q.jsxs)(x.Z,{children:[null===ve||void 0===ve||null===(n=ve.slice(H*ee,H*ee+ee))||void 0===n?void 0:n.map((function(e,n){var i;return(0,q.jsxs)(D.Z,{children:[(0,q.jsx)(I.Z,{padding:"checkbox",children:(0,q.jsx)(L.Z,{checked:null===ie||void 0===ie?void 0:ie.includes(e),onClick:function(){return te(e)}})}),(0,q.jsx)(I.Z,{align:"left",children:""===e.lastName&&d("unassigned")||e.lastName}),(0,q.jsx)(I.Z,{align:"left",children:""===(null===e||void 0===e?void 0:e.firstName)&&d("unassigned")||e.firstName}),(0,q.jsx)(I.Z,{align:"center",children:null===(i=e.category)||void 0===i?void 0:i.name})]},e.id)})),0===(null===ve||void 0===ve?void 0:ve.length)&&(0,q.jsx)(_.et,{isNotFound:!0})]})]})]})}),(0,q.jsx)(_.S_,{count:null===ve||void 0===ve?void 0:ve.length,page:H,rowsPerPage:ee,onPageChange:re,onRowsPerPageChange:se}),(0,q.jsx)(u.Z,{spacing:3,children:(0,q.jsxs)(R.Z,{sx:{textAlign:"right"},children:[(0,q.jsx)(a.Z,{variant:"outlined",color:"inherit",onClick:i,children:d("Cancel")}),(0,q.jsx)(p.Z,{sx:{m:3},type:"submit",variant:"contained",disabled:0===ie.length,loading:$,children:d("save")})]})})]})})})}var U=i(42669),$=i(3482);function G(e){var n=e.row,i=e.selected,o=e.onSelectRow,r=e.onDeleteRow,s=n.firstName,d=n.lastName,c=n.email,v=n.phone,h=n.category,x=n.contract,f=(0,l.useState)(!1),m=(0,t.Z)(f,2),j=m[0],p=m[1],Z=(0,z.nt)().translate;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(D.Z,{hover:!0,selected:i,children:[(0,q.jsx)(I.Z,{padding:"checkbox",children:!1===(null===h||void 0===h?void 0:h.isStandard)&&(0,q.jsx)(L.Z,{checked:i,onClick:o})}),(0,q.jsx)(I.Z,{children:(0,q.jsxs)(u.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,q.jsx)($.z,{name:s}),(0,q.jsxs)("div",{children:[(0,q.jsx)(U.Z,{variant:"subtitle2",noWrap:!0,children:s}),(0,q.jsx)(U.Z,{noWrap:!0,variant:"body2",sx:{color:"text.disabled"},children:d})]})]})}),(0,q.jsx)(I.Z,{align:"left",children:""===c&&Z("unassigned")||c}),(0,q.jsx)(I.Z,{align:"left",children:""===v&&Z("unassigned")||v}),(0,q.jsx)(I.Z,{align:"center",children:(""===(null===x||void 0===x?void 0:x.position)||null===(null===x||void 0===x?void 0:x.position))&&Z("unassigned")||(null===x||void 0===x?void 0:x.position)}),(0,q.jsx)(I.Z,{align:"center",children:null===h||void 0===h?void 0:h.name}),(0,q.jsx)(I.Z,{align:"right",children:!1===(null===h||void 0===h?void 0:h.isStandard)&&(0,q.jsx)(g.Z,{color:"error",title:Z("assign.unassign"),onClick:function(){p(!0)},children:(0,q.jsx)(w.Z,{icon:"typcn:user-delete"})})})]}),(0,q.jsx)(S.Z,{open:j,onClose:function(){p(!1)},title:Z("assign.unassign_employee"),content:(0,q.jsxs)(q.Fragment,{children:[Z("assign.you_sure_unassign_employees")," ",(0,q.jsxs)("strong",{children:[" ",s+" "+d," "]})," ?"]}),action:(0,q.jsx)(a.Z,{variant:"contained",color:"error",onClick:r,children:Z("yes")})})]})}function Y(e){var n=e.filterName,i=e.isFiltered,t=e.onFilterName,o=e.onResetFilter,l=(0,z.nt)().translate;return(0,q.jsxs)(u.Z,{spacing:2,alignItems:"center",direction:{xs:"column",md:"row"},sx:{px:2.5,py:3},children:[(0,q.jsx)(B.Z,{fullWidth:!0,value:n,onChange:t,placeholder:l("cagnotte.search_name_only"),InputProps:{startAdornment:(0,q.jsx)(O.Z,{position:"start",children:(0,q.jsx)(w.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),i&&(0,q.jsx)(a.Z,{color:"error",sx:{flexShrink:0},onClick:o,startIcon:(0,q.jsx)(w.Z,{icon:"eva:trash-2-outline"}),children:l("clear")})]})}var H=i(38618);function J(e){var n=e.isNotFound,i=(0,z.nt)().translate;return(0,q.jsx)(D.Z,{children:n?(0,q.jsx)(I.Z,{colSpan:12,children:(0,q.jsx)(H.Z,{title:i("empty_table.no_employe_assign"),sx:{"& span.MuiBox-root":{height:160}}})}):(0,q.jsx)(I.Z,{colSpan:12,sx:{p:0}})})}function X(){var e=(0,k.K$)().themeStretch,n=(0,V.I0)(),i=(0,b.Ds)().enqueueSnackbar,P=(0,r.s0)(),N=(0,z.nt)().translate,R=(0,r.UO)().id,F=(0,_.x6)({defaultOrderBy:"createDate"}),D=F.dense,I=F.page,L=F.order,E=F.orderBy,W=F.rowsPerPage,A=F.setPage,B=F.selected,O=F.setSelected,K=F.onSelectRow,U=F.onSelectAllRows,$=F.onSort,H=F.onChangeDense,X=F.onChangePage,ee=F.onChangeRowsPerPage,ne=(0,V.v9)((function(e){return e.employee})).employees,ie=(0,V.v9)((function(e){return e.categories})),te=ie.refresh,oe=ie.isLoading,le=ie.categories,re=null===le||void 0===le?void 0:le.find((function(e){return(null===e||void 0===e?void 0:e.id.toString())===R})),se=(0,l.useState)([]),ae=(0,t.Z)(se,2),de=ae[0],ce=ae[1],ue=(0,l.useState)(""),ve=(0,t.Z)(ue,2),ge=ve[0],he=ve[1],xe=(0,l.useState)(!1),fe=(0,t.Z)(xe,2),me=fe[0],je=fe[1],pe=(0,l.useState)(!1),Ze=(0,t.Z)(pe,2),we=Ze[0],Ce=Ze[1],Se=(0,l.useState)("all"),ye=(0,t.Z)(Se,2),be=ye[0],ke=ye[1],_e=[{id:"Name",label:N("name"),align:"left"},{id:"Email",label:N("Email"),align:"left"},{id:"Phone",label:N("Phone"),align:"left"},{id:"Positin",label:N("companies.position"),align:"center",width:140},{id:"Cagnotte",label:N("cagnotte.cagnotte"),align:"center",width:140},{id:""}],Pe=function(e){var n,i,t=e.inputData,o=e.comparator,l=e.filterName,r=null===(n=t)||void 0===n?void 0:n.map((function(e,n){return[e,n]}));null===r||void 0===r||r.sort((function(e,n){var i=o(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),t=null===r||void 0===r?void 0:r.map((function(e){return e[0]})),l&&(t=null===(i=t)||void 0===i?void 0:i.filter((function(e){var n,i;return-1!==(null===(n=e.lastName)||void 0===n?void 0:n.toLowerCase().indexOf(null===l||void 0===l?void 0:l.toLowerCase()))||-1!==(null===(i=e.firstName)||void 0===i?void 0:i.toLowerCase().indexOf(null===l||void 0===l?void 0:l.toLowerCase()))})));return t}({inputData:de,comparator:(0,_.sQ)(L,E),filterName:ge}),Ne=null===Pe||void 0===Pe?void 0:Pe.slice(I*W,I*W+W),Re=D?56:76,Fe="all"!==be||""!==ge,De=!(null!==Pe&&void 0!==Pe&&Pe.length)&&!!ge||!(null!==Pe&&void 0!==Pe&&Pe.length)&&!!be,Ie=function(){je(!1)},Le=function(){Ce(!1)};return(0,l.useEffect)((function(){n((0,M.VB)({}))}),[n,te]),(0,l.useEffect)((function(){null!==ne&&void 0!==ne&&ne.length&&ce(null===ne||void 0===ne?void 0:ne.filter((function(e){var n;return(null===(n=e.category)||void 0===n?void 0:n.id.toString())===R&&"DELETED"!==(null===e||void 0===e?void 0:e.status)})))}),[ne,te,R]),(0,l.useEffect)((function(){n((0,Q.kw)({}))}),[n]),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(o.ql,{children:(0,q.jsxs)("title",{children:[" ",N("cagnotte.cagnottes")]})}),(0,q.jsxs)(s.Z,{maxWidth:!e&&"lg",children:[(0,q.jsx)(y.Z,{heading:null===re||void 0===re?void 0:re.name,links:[{name:"Dashboard",href:Z.vB.general.homeComany},{name:N("Categories"),href:Z.vB.cagnotte.list},{name:N("assign.list_assign")}],action:(0,q.jsx)(a.Z,{onClick:function(){Ce(!0)},variant:"contained",startIcon:(0,q.jsx)(w.Z,{icon:"eva:plus-fill"}),children:N("employee.new_employee")})}),(0,q.jsxs)(d.Z,{children:[(0,q.jsx)(Y,{isFiltered:Fe,filterName:ge,onFilterName:function(e){A(0),he(e.target.value)},onResetFilter:function(){he(""),ke("all")}}),(0,q.jsxs)(c.Z,{sx:{position:"relative",overflow:"unset"},children:[(0,q.jsx)(_.Z4,{dense:D,numSelected:B.length,rowCount:null===de||void 0===de?void 0:de.length,onSelectAllRows:function(e){return U(e,de.map((function(e){return e.id})))},action:(0,q.jsx)(u.Z,{direction:"row",children:(0,q.jsx)(v.Z,{title:N("assign.unassign"),children:(0,q.jsx)(g.Z,{color:"warning",onClick:function(){je(!0)},children:(0,q.jsx)(w.Z,{icon:"typcn:user-delete"})})})})}),(0,q.jsx)(C.Z,{children:(0,q.jsxs)(h.Z,{size:D?"small":"medium",sx:{minWidth:800},children:[!1===(null===re||void 0===re?void 0:re.isStandard)&&(0,q.jsx)(_.K,{order:L,orderBy:E,headLabel:_e,rowCount:null===de||void 0===de?void 0:de.length,numSelected:B.length,onSort:$,onSelectAllRows:function(e){return U(e,de.map((function(e){return e})))}}),(0,q.jsxs)(x.Z,{children:[null===Pe||void 0===Pe?void 0:Pe.slice(I*W,I*W+W).map((function(e){return(0,q.jsx)(G,{row:e,selected:B.includes(e),onSelectRow:function(){return K(e)},onDeleteRow:function(){return t=e,n((0,Q.jv)({navigate:P,toast:i,translate:N,selected:[t],onClose:Ie})),O([]),void(I>0&&Ne.length<2&&A(I-1));var t}},e.id)})),(0,q.jsx)(_.$W,{height:Re,emptyRows:(0,_.fQ)(I,W,null===de||void 0===de?void 0:de.length)}),(0,q.jsx)(J,{isNotFound:De})]})]})})]}),(0,q.jsx)(_.S_,{count:null===Pe||void 0===Pe?void 0:Pe.length,page:I,rowsPerPage:W,onPageChange:X,onRowsPerPageChange:ee,dense:D,onChangeDense:H})]})]}),(0,q.jsx)(S.Z,{open:me,onClose:Ie,title:N("assign.unassigned_employeees"),content:(0,q.jsxs)(q.Fragment,{children:[N("assign.you_sure_unassign_employees")," ",(0,q.jsxs)("strong",{children:[" ",B.length," "]})," ",N("assign.employees"),"?"]}),action:(0,q.jsx)(p.Z,{variant:"contained",color:"error",onClick:function(){!function(e){n((0,Q.jv)({navigate:P,toast:i,translate:N,selected:e,onClose:Ie})),O([]),I>0&&Ne.length<2&&A(I-1)}(B),Ie()},loading:oe,children:N("yes")})}),(0,q.jsxs)(f.Z,{fullWidth:!0,maxWidth:"lg",open:we,onClose:Le,children:[(0,q.jsx)(m.Z,{sx:{pb:2},children:N("cagnotte.Assign")}),(0,q.jsx)(j.Z,{children:(0,q.jsx)(T,{onClose:Le})})]})]})}}}]);